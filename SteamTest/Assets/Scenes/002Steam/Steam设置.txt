/*

Steamworks: https://partner.steamgames.com/
Steamworks.NET: https://steamworks.github.io/

https://github.com/rlabrecque/Steamworks.NET

在Unity中接入Steam SDK（通过Steamworks.NET）是集成Steam平台功能（如成就、云存档、支付等）的核心步骤。以下是基于官方文档和社区实践的完整流程：

🔧 ​​一、准备工作​​
​​注册Steamworks开发者账号​​
访问 Steamworks官网，注册并完成开发者资质审核（需支付100美元）。
​​创建应用并获取App ID​​
登录Steamworks后台 → ​​创建新应用​​ → 填写游戏信息 → 保存后获得唯一的 ​​App ID​​（数字标识）。
​​下载必要资源​​：
​​Steamworks SDK​​：从Steamworks后台下载最新版SDK（解压备用）。
​​Steamworks.NET插件​​：从GitHub下载 Steamworks.NET.unitypackage（推荐最新稳定版）。
⚙️ ​​二、集成步骤​​
​​1. 导入Steamworks.NET到Unity项目​​
打开Unity项目 → Assets → Import Package → Custom Package → 选择下载的 Steamworks.NET.unitypackage → 导入全部文件。
​​2. 配置Steamworks SDK文件​​
将下载的 ​​Steamworks SDK​​ 中的以下文件复制到Unity项目：
steam_api.dll（Windows）或 libsteam_api.dylib（macOS）
放置路径：Assets/Plugins/（若目录不存在则手动创建）。
​​3. 设置App ID​​
​​方法1（推荐）​​：
在项目根目录（与Assets同级）创建文本文件 steam_appid.txt → 内容填写你的App ID（如 480）。
​​方法2（代码初始化）​​：
修改 SteamManager.cs 脚本中的初始化代码：
// 在SteamManager.Init()方法中替换为你的App ID
if (SteamAPI.RestartAppIfNecessary(new AppId_t(你的AppID))) {
    Application.Quit();
    return;
}
[3](@ref)
​​4. 初始化SteamAPI​​
在场景中创建空物体 → 挂载 SteamManager 脚本（该脚本在导入Steamworks.NET后自动生成）。
测试初始化是否成功：
void Start() {
    if (SteamManager.Initialized) {
        string userName = SteamFriends.GetPersonaName();
        Debug.Log("Steam用户名: " + userName); // 成功则输出用户名
    }
}
🛠️ ​​三、实现Steam功能（示例）​​
​​1. 解锁成就​​
if (SteamManager.Initialized) {
    SteamUserStats.SetAchievement("ACH_WIN_10_GAMES"); // 成就ID需在Steamworks后台配置
    SteamUserStats.StoreStats(); // 保存成就状态
}
​​2. 云存档存储​​
// 写入存档
SteamRemoteStorage.FileWrite("save.dat", System.Text.Encoding.UTF8.GetBytes("存档数据"));

// 读取存档
byte[] data = SteamRemoteStorage.FileRead("save.dat");
string saveData = System.Text.Encoding.UTF8.GetString(data);
​​3. Steam支付集成（内购）​​
在Steamworks后台配置商品信息（如道具ID、价格）。
调用支付接口：
SteamMicroTransactions.Init(你的AppID); // 初始化支付
SteamMicroTransactions.StartPurchase("商品ID"); // 发起购买
⚠️ ​​四、调试与常见问题​​
​​问题​​	​​解决方案​​
SteamManager.Initialized=false	- 确保Steam客户端已运行并登录
- 检查 steam_appid.txt 是否存在且App ID正确
成就/统计不更新	- 调用 SteamUserStats.StoreStats() 保存数据
- 后台检查成就配置是否发布
支付回调失败	- 验证商品ID是否在Steamworks后台注册
- 检查网络连接（SteamAPI需在线）
跨平台库缺失（Linux/macOS）	将对应平台的 libsteam_api.so（Linux）或 libsteam_api.dylib（macOS）放入 Assets/Plugins
📦 ​​五、游戏上传到Steam​​
使用Steamworks SDK中的 ​​ContentBuilder工具​​：
配置 scripts/app_build_xxx.vdf 文件，指定App ID和游戏文件路径。
通过命令行工具 steamcmd.exe 登录并上传：
login 开发者账号 密码
run_app_build 路径/app_build_xxx.vdf
*/