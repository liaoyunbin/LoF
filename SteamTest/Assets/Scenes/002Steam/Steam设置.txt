/*

Steamworks: https://partner.steamgames.com/
Steamworks.NET: https://steamworks.github.io/

https://github.com/rlabrecque/Steamworks.NET

åœ¨Unityä¸­æ¥å…¥Steam SDKï¼ˆé€šè¿‡Steamworks.NETï¼‰æ˜¯é›†æˆSteamå¹³å°åŠŸèƒ½ï¼ˆå¦‚æˆå°±ã€äº‘å­˜æ¡£ã€æ”¯ä»˜ç­‰ï¼‰çš„æ ¸å¿ƒæ­¥éª¤ã€‚ä»¥ä¸‹æ˜¯åŸºäºå®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºå®è·µçš„å®Œæ•´æµç¨‹ï¼š

ğŸ”§ â€‹â€‹ä¸€ã€å‡†å¤‡å·¥ä½œâ€‹â€‹
â€‹â€‹æ³¨å†ŒSteamworkså¼€å‘è€…è´¦å·â€‹â€‹
è®¿é—® Steamworkså®˜ç½‘ï¼Œæ³¨å†Œå¹¶å®Œæˆå¼€å‘è€…èµ„è´¨å®¡æ ¸ï¼ˆéœ€æ”¯ä»˜100ç¾å…ƒï¼‰ã€‚
â€‹â€‹åˆ›å»ºåº”ç”¨å¹¶è·å–App IDâ€‹â€‹
ç™»å½•Steamworksåå° â†’ â€‹â€‹åˆ›å»ºæ–°åº”ç”¨â€‹â€‹ â†’ å¡«å†™æ¸¸æˆä¿¡æ¯ â†’ ä¿å­˜åè·å¾—å”¯ä¸€çš„ â€‹â€‹App IDâ€‹â€‹ï¼ˆæ•°å­—æ ‡è¯†ï¼‰ã€‚
â€‹â€‹ä¸‹è½½å¿…è¦èµ„æºâ€‹â€‹ï¼š
â€‹â€‹Steamworks SDKâ€‹â€‹ï¼šä»Steamworksåå°ä¸‹è½½æœ€æ–°ç‰ˆSDKï¼ˆè§£å‹å¤‡ç”¨ï¼‰ã€‚
â€‹â€‹Steamworks.NETæ’ä»¶â€‹â€‹ï¼šä»GitHubä¸‹è½½ Steamworks.NET.unitypackageï¼ˆæ¨èæœ€æ–°ç¨³å®šç‰ˆï¼‰ã€‚
âš™ï¸ â€‹â€‹äºŒã€é›†æˆæ­¥éª¤â€‹â€‹
â€‹â€‹1. å¯¼å…¥Steamworks.NETåˆ°Unityé¡¹ç›®â€‹â€‹
æ‰“å¼€Unityé¡¹ç›® â†’ Assets â†’ Import Package â†’ Custom Package â†’ é€‰æ‹©ä¸‹è½½çš„ Steamworks.NET.unitypackage â†’ å¯¼å…¥å…¨éƒ¨æ–‡ä»¶ã€‚
â€‹â€‹2. é…ç½®Steamworks SDKæ–‡ä»¶â€‹â€‹
å°†ä¸‹è½½çš„ â€‹â€‹Steamworks SDKâ€‹â€‹ ä¸­çš„ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°Unityé¡¹ç›®ï¼š
steam_api.dllï¼ˆWindowsï¼‰æˆ– libsteam_api.dylibï¼ˆmacOSï¼‰
æ”¾ç½®è·¯å¾„ï¼šAssets/Plugins/ï¼ˆè‹¥ç›®å½•ä¸å­˜åœ¨åˆ™æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚
â€‹â€‹3. è®¾ç½®App IDâ€‹â€‹
â€‹â€‹æ–¹æ³•1ï¼ˆæ¨èï¼‰â€‹â€‹ï¼š
åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆä¸AssetsåŒçº§ï¼‰åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ steam_appid.txt â†’ å†…å®¹å¡«å†™ä½ çš„App IDï¼ˆå¦‚ 480ï¼‰ã€‚
â€‹â€‹æ–¹æ³•2ï¼ˆä»£ç åˆå§‹åŒ–ï¼‰â€‹â€‹ï¼š
ä¿®æ”¹ SteamManager.cs è„šæœ¬ä¸­çš„åˆå§‹åŒ–ä»£ç ï¼š
// åœ¨SteamManager.Init()æ–¹æ³•ä¸­æ›¿æ¢ä¸ºä½ çš„App ID
if (SteamAPI.RestartAppIfNecessary(new AppId_t(ä½ çš„AppID))) {
    Application.Quit();
    return;
}
[3](@ref)
â€‹â€‹4. åˆå§‹åŒ–SteamAPIâ€‹â€‹
åœ¨åœºæ™¯ä¸­åˆ›å»ºç©ºç‰©ä½“ â†’ æŒ‚è½½ SteamManager è„šæœ¬ï¼ˆè¯¥è„šæœ¬åœ¨å¯¼å…¥Steamworks.NETåè‡ªåŠ¨ç”Ÿæˆï¼‰ã€‚
æµ‹è¯•åˆå§‹åŒ–æ˜¯å¦æˆåŠŸï¼š
void Start() {
    if (SteamManager.Initialized) {
        string userName = SteamFriends.GetPersonaName();
        Debug.Log("Steamç”¨æˆ·å: " + userName); // æˆåŠŸåˆ™è¾“å‡ºç”¨æˆ·å
    }
}
ğŸ› ï¸ â€‹â€‹ä¸‰ã€å®ç°SteamåŠŸèƒ½ï¼ˆç¤ºä¾‹ï¼‰â€‹â€‹
â€‹â€‹1. è§£é”æˆå°±â€‹â€‹
if (SteamManager.Initialized) {
    SteamUserStats.SetAchievement("ACH_WIN_10_GAMES"); // æˆå°±IDéœ€åœ¨Steamworksåå°é…ç½®
    SteamUserStats.StoreStats(); // ä¿å­˜æˆå°±çŠ¶æ€
}
â€‹â€‹2. äº‘å­˜æ¡£å­˜å‚¨â€‹â€‹
// å†™å…¥å­˜æ¡£
SteamRemoteStorage.FileWrite("save.dat", System.Text.Encoding.UTF8.GetBytes("å­˜æ¡£æ•°æ®"));

// è¯»å–å­˜æ¡£
byte[] data = SteamRemoteStorage.FileRead("save.dat");
string saveData = System.Text.Encoding.UTF8.GetString(data);
â€‹â€‹3. Steamæ”¯ä»˜é›†æˆï¼ˆå†…è´­ï¼‰â€‹â€‹
åœ¨Steamworksåå°é…ç½®å•†å“ä¿¡æ¯ï¼ˆå¦‚é“å…·IDã€ä»·æ ¼ï¼‰ã€‚
è°ƒç”¨æ”¯ä»˜æ¥å£ï¼š
SteamMicroTransactions.Init(ä½ çš„AppID); // åˆå§‹åŒ–æ”¯ä»˜
SteamMicroTransactions.StartPurchase("å•†å“ID"); // å‘èµ·è´­ä¹°
âš ï¸ â€‹â€‹å››ã€è°ƒè¯•ä¸å¸¸è§é—®é¢˜â€‹â€‹
â€‹â€‹é—®é¢˜â€‹â€‹	â€‹â€‹è§£å†³æ–¹æ¡ˆâ€‹â€‹
SteamManager.Initialized=false	- ç¡®ä¿Steamå®¢æˆ·ç«¯å·²è¿è¡Œå¹¶ç™»å½•
- æ£€æŸ¥ steam_appid.txt æ˜¯å¦å­˜åœ¨ä¸”App IDæ­£ç¡®
æˆå°±/ç»Ÿè®¡ä¸æ›´æ–°	- è°ƒç”¨ SteamUserStats.StoreStats() ä¿å­˜æ•°æ®
- åå°æ£€æŸ¥æˆå°±é…ç½®æ˜¯å¦å‘å¸ƒ
æ”¯ä»˜å›è°ƒå¤±è´¥	- éªŒè¯å•†å“IDæ˜¯å¦åœ¨Steamworksåå°æ³¨å†Œ
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆSteamAPIéœ€åœ¨çº¿ï¼‰
è·¨å¹³å°åº“ç¼ºå¤±ï¼ˆLinux/macOSï¼‰	å°†å¯¹åº”å¹³å°çš„ libsteam_api.soï¼ˆLinuxï¼‰æˆ– libsteam_api.dylibï¼ˆmacOSï¼‰æ”¾å…¥ Assets/Plugins
ğŸ“¦ â€‹â€‹äº”ã€æ¸¸æˆä¸Šä¼ åˆ°Steamâ€‹â€‹
ä½¿ç”¨Steamworks SDKä¸­çš„ â€‹â€‹ContentBuilderå·¥å…·â€‹â€‹ï¼š
é…ç½® scripts/app_build_xxx.vdf æ–‡ä»¶ï¼ŒæŒ‡å®šApp IDå’Œæ¸¸æˆæ–‡ä»¶è·¯å¾„ã€‚
é€šè¿‡å‘½ä»¤è¡Œå·¥å…· steamcmd.exe ç™»å½•å¹¶ä¸Šä¼ ï¼š
login å¼€å‘è€…è´¦å· å¯†ç 
run_app_build è·¯å¾„/app_build_xxx.vdf
*/