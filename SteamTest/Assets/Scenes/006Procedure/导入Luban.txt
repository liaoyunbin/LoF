/*

ä¸€ã€ç¯å¢ƒå‡†å¤‡â€‹â€‹
â€‹â€‹å®‰è£…ä¾èµ–â€‹â€‹
â€‹â€‹.NET SDK 8.0+â€‹â€‹ï¼šä»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼ˆLubanå·¥å…·é“¾è¿è¡ŒåŸºç¡€ï¼‰
â€‹â€‹Gitâ€‹â€‹ï¼šç”¨äºæ‹‰å–ç¤ºä¾‹é¡¹ç›®ï¼ˆå¯é€‰ä½†æ¨èï¼‰
â€‹â€‹ä¸‹è½½Lubanæ¡ˆä¾‹é¡¹ç›®â€‹â€‹
git clone https://gitee.com/focus-creative-games/luban_examples.git
ä¿ç•™å…³é”®ç›®å½•ï¼šDataTablesï¼ˆé…ç½®è¡¨æ¨¡æ¿ï¼‰ã€Tools/Lubanï¼ˆå·¥å…·æœ¬ä½“ï¼‰
âš™ï¸ â€‹â€‹äºŒã€Unityé¡¹ç›®é›†æˆLubanâ€‹â€‹
â€‹â€‹å®‰è£…Luban UnityåŒ…â€‹â€‹
æ‰“å¼€Package Manager â†’ Add package from git URL â†’ è¾“å…¥ï¼š
https://gitee.com/focus-creative-games/luban_unity.git
â€‹â€‹å¯ç”¨Unsafe Codeâ€‹â€‹ï¼šPlayer Settings > Allow 'unsafe' Codeï¼ˆå¿…éœ€ï¼‰
â€‹â€‹é…ç½®æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆgen.batï¼‰â€‹â€‹
ä»æ¡ˆä¾‹ä¸­å¤åˆ¶gen.batï¼Œä¿®æ”¹å…³é”®è·¯å¾„ï¼š
set WORKSPACE=..\..  # luban_examplesæ ¹ç›®å½•
set LUBAN_DLL=%WORKSPACE%\Tools\Luban\Luban.dll
set CONF_ROOT=%WORKSPACE%\DataTables
dotnet %LUBAN_DLL% ^
   -t client ^
   -c cs-simple-json ^  # ç”ŸæˆC#ä»£ç 
   -d json ^            # è¾“å‡ºJSONæ•°æ®
   -x outputCodeDir=Assets/Scripts/Gen ^  # ä»£ç è¾“å‡ºè·¯å¾„
   -x outputDataDir=Assets/StreamingAssets/Configs  # æ•°æ®è¾“å‡ºè·¯å¾„
åŒå‡»è¿è¡Œgen.batï¼Œç”Ÿæˆä»£ç ä¸æ•°æ®æ–‡ä»¶
ğŸ“Š â€‹â€‹ä¸‰ã€é…ç½®è¡¨è®¾è®¡ä¸è§„åˆ™â€‹â€‹
â€‹â€‹è¡¨æ ¼ç»“æ„è§„èŒƒâ€‹â€‹
â€‹â€‹è¡Œç±»å‹â€‹â€‹	â€‹â€‹è¯´æ˜â€‹â€‹
â€‹â€‹å­—æ®µåè¡Œâ€‹â€‹	é¦–å•å…ƒæ ¼ä»¥##å¼€å¤´ï¼ˆå¦‚##idï¼‰
â€‹â€‹ç±»å‹è¡Œâ€‹â€‹	é¦–å•å…ƒæ ¼ä¸º##typeï¼Œå®šä¹‰æ•°æ®ç±»å‹ï¼ˆå¦‚int, stringï¼‰
â€‹â€‹åˆ†ç»„è¡Œâ€‹â€‹	æ ‡è®°å­—æ®µå½’å±ï¼šcï¼ˆå®¢æˆ·ç«¯ï¼‰ã€sï¼ˆæœåŠ¡å™¨ï¼‰ã€c,sï¼ˆå…¨å¹³å°ï¼‰
â€‹â€‹æ•°æ®è¡Œâ€‹â€‹	ä»ç¬¬5è¡Œå¼€å§‹å¡«å†™å®é™…æ•°æ®
â€‹â€‹å£°æ˜è¡¨æ–‡ä»¶ï¼ˆtables.xlsxï¼‰â€‹â€‹
åœ¨Datasç›®å½•ä¸‹åˆ›å»ºæ­¤æ–‡ä»¶ï¼Œå£°æ˜éœ€å¯¼å‡ºçš„è¡¨æ ¼ï¼š
full_name	value_type	input	comment
item.TbItem	Item	item.xlsx	é“å…·è¡¨
reward.TbReward	Reward	reward.xlsx	å¥–åŠ±è¡¨
ğŸ’» â€‹â€‹å››ã€ä»£ç åŠ è½½ä¸ä½¿ç”¨â€‹â€‹
â€‹â€‹åˆå§‹åŒ–é…ç½®è¡¨â€‹â€‹
using cfg;
public class ConfigLoader : MonoBehaviour
{
    void Start()
    {
        // åˆå§‹åŒ–Tableså®ä¾‹ï¼ˆè‡ªåŠ¨åŠ è½½æ‰€æœ‰é…ç½®ï¼‰
        var tables = new cfg.Tables(Loader);
        // è·å–é“å…·ID=1001çš„æ•°æ®
        var item = tables.TbItem.Get(1001);
        Debug.Log($"é“å…·å: {item.Name}, ä»·æ ¼: {item.Price}");
    }

    // è‡ªå®šä¹‰JSONåŠ è½½å™¨
    private JSONNode Loader(string file)
    {
        string path = Path.Combine(Application.streamingAssetsPath, "Configs", $"{file}.json");
        return JSON.Parse(File.ReadAllText(path));
    }
}
â€‹â€‹æ•°æ®ç±»å‹æ˜ å°„â€‹â€‹
ç”Ÿæˆçš„ä»£ç ä½äºAssets/Scripts/Genï¼ŒåŒ…å«ï¼š
cfg.Tablesï¼šå…¨å±€é…ç½®è¡¨å…¥å£
cfg.item.Itemï¼šå¯¹åº”item.xlsxä¸­å®šä¹‰çš„é“å…·ç±»
cfg.reward.Rewardï¼šå¯¹åº”reward.xlsxä¸­çš„å¥–åŠ±ç±»
âš¡ï¸ â€‹â€‹äº”ã€é«˜çº§åŠŸèƒ½ä¸ä¼˜åŒ–â€‹â€‹
â€‹â€‹è‡ªåŠ¨åŒ–æµç¨‹â€‹â€‹
â€‹â€‹è¡¨æ ¼æ–°å¢è‡ªåŠ¨æ³¨å†Œâ€‹â€‹ï¼šåœ¨Excelæ–‡ä»¶åå‰æ·»åŠ #ï¼ˆå¦‚#weapon.xlsxï¼‰ï¼ŒLubanè‡ªåŠ¨æ‰«æå…æ³¨å†Œ
â€‹â€‹è„šæœ¬æ‰©å±•â€‹â€‹ï¼šç”¨Pythonç¼–å†™è‡ªåŠ¨æ›´æ–°__tables__.xlsxçš„è„šæœ¬ï¼Œå‡å°‘æ‰‹åŠ¨æ“ä½œ
â€‹â€‹æ•°æ®æ ¡éªŒâ€‹â€‹
è¿è¡Œcheck.batæ£€æµ‹é…ç½®é”™è¯¯ï¼ˆå¦‚IDé‡å¤ã€ç±»å‹ä¸åŒ¹é…ï¼‰
â€‹â€‹å¤šè¯­è¨€æ”¯æŒâ€‹â€‹
åœ¨luban.confä¸­é…ç½®å¤šè¯­è¨€æ–‡ä»¶è·¯å¾„ï¼Œè‡ªåŠ¨ç”Ÿæˆæœ¬åœ°åŒ–é”®å€¼å¯¹
*/